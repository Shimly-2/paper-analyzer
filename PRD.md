# Paper Analyzer 需求文档 (PRD)

## 1. 项目概述

**项目名称**: Paper Analyzer (论文分析助手)

**核心功能**: 一个基于 Web 的论文解读工具，支持多种输入格式（PDF/LaTeX/arXiv ID/URL/文件夹），利用 AI 进行深度分析和翻译，结合 Obsidian 实现本地知识管理。

**目标用户**: 研究人员、开发者、学术写作者

---

## 2. 功能模块

### 2.1 论文输入与管理

| 功能 | 描述 | 优先级 |
|------|------|--------|
| **多格式输入** | 支持 PDF、LaTeX 源码、arXiv ID、arXiv URL、文件夹批量导入 | P0 |
| **MinerU 解析** | 使用 MinerU 工具将论文解析为 Markdown/HTML 格式，保留公式、表格、图表 | P0 |
| **论文库管理** | 论文列表展示，支持分类筛选（全部/Benchmark/长文本/Agent） | P1 |
| **论文元数据** | 自动提取标题、作者、摘要、发表日期、arXiv ID | P1 |
| **本地存储** | 论文原文、解析结果存储到本地，配合 Obsidian | P1 |
| **文件夹监控** | 监控指定文件夹，新论文自动导入 | P2 |

### 2.2 论文阅读界面 (阅读模式)

**布局**: 左右分栏 (50% / 50%)

| 功能 | 描述 | 优先级 |
|------|------|--------|
| **双语对照** | 左侧原文，右侧中文翻译，对照阅读 | P0 |
| **公式渲染** | KaTeX/MathJax 渲染数学公式 | P0 |
| **表格展示** | 渲染原始表格，支持横向滚动 | P0 |
| **图表显示** | 支持图片、流程图渲染 | P1 |
| **目录导航** | 论文结构化目录，点击跳转 | P1 |
| **高亮标注** | 选中文本可高亮、添加笔记 | P2 |
| **书签收藏** | 收藏关键页面、段落 | P2 |
| **阅读进度** | 记录并恢复阅读位置 | P2 |

### 2.3 AI 分析界面 (分析模式)

| 功能 | 描述 | 优先级 |
|------|------|--------|
| **深度解读** | 使用 MiniMax 2.5 对论文进行多维度分析 | P0 |
| **结构化报告** | 生成研究动机、核心思想、算法结构、实验结论等 | P0 |
| **关键概念提取** | 自动提取核心概念、术语解释 | P1 |
| **论文对比** | 选择多篇论文进行对比分析 | P2 |
| **Related Work 生成** | 自动生成 Related Work 段落 | P2 |
| **思维导图** | 基于论文内容生成可视化思维导图 | P2 |

### 2.4 智能问答 (Agent Q&A)

| 功能 | 描述 | 优先级 |
|------|------|--------|
| **右侧问答框** | 页面右侧固定 Agent 问答区域 | P0 |
| **上下文理解** | Agent 已阅读论文内容，可回答细节问题 | P0 |
| **追问功能** | 支持多轮对话，记住上下文 | P1 |
| **快速提示** | 提供预设问题按钮 | P1 |
| **问答历史** | 保存问答记录，可回顾 | P2 |
| **导出问答** | 导出问答记录为 Markdown | P2 |

### 2.5 Obsidian 集成

| 功能 | 描述 | 优先级 |
|------|------|--------|
| **双向同步** | 分析报告同步到 Obsidian Vault | P0 |
| **模板支持** | 自定义 Obsidian 笔记模板 | P1 |
| **双向链接** | 自动建立论文间链接关系 | P1 |
| **标签管理** | 自动打标签（作者、年份、主题） | P2 |
| **PDF 嵌入** | Obsidian 中直接嵌入 PDF 阅读 | P2 |

### 2.6 翻译功能

| 功能 | 描述 | 优先级 |
|------|------|--------|
| **全文翻译** | 完整论文翻译（使用 MiniMax 2.5, max_tokens=196608） | P0 |
| **分块翻译** | 长论文分块翻译，避免截断 | P0 |
| **术语库** | 维护学术术语对照表 | P1 |
| **双语对照** | 原文与译文对照显示 | P1 |

---

## 3. 技术架构

### 3.1 前端

- **框架**: Next.js / React
- **UI**: Tailwind CSS + shadcn/ui
- **公式渲染**: KaTeX
- **PDF 渲染**: react-pdf / pdf.js
- **状态管理**: Zustand

### 3.2 后端

- **API**: FastAPI (Python)
- **AI 模型**: MiniMax 2.5 (max_tokens=196608)
- **PDF 解析**: MinerU / pdfplumber
- **向量化**: 支持本地 embedding (可选)

### 3.3 数据存储

- **本地文件**: 论文 PDF、解析结果
- **数据库**: SQLite (论文元数据、问答历史)
- **Obsidian**: 通过 Vault 路径直接读写 .md 文件

---

## 4. 页面结构

### 4.1 首页 / 论文库

```
┌─────────────────────────────────────────────────────────┐
│ 🔍 搜索 | [论文库] [分析报告] | + 添加论文 | ⚙️ 设置    │
├──────────┬──────────────────────────────────────────────┤
│ 筛选      │ 论文列表                                      │
│ ─────    │ ┌─────────────────────────────────────────┐ │
│ [全部]    │ │ 论文标题                                  │ │
│ [Benchmark]│ │ arXiv: 2501.12345 | 2025-01-18         │ │
│ [长文本]   │ │ 标签: Benchmark | Academic              │ │
│ [Agent]   │ └─────────────────────────────────────────┘ │
│          │ ┌─────────────────────────────────────────┐ │
│          │ │ ...                                      │ │
└──────────┴──────────────────────────────────────────────┘
```

### 4.2 阅读模式

```
┌─────────────────────────────────────────────────────────┐
│ ← 返回 | 论文标题 | arXiv:xxx | 💾 保存 | ⚙️ 设置      │
├────────────────────────┬────────────────────────────────┤
│ 原文 (英文)           │ 译文 (中文)                    │
│ ───────────────────   │ ─────────────────────────────   │
│ # Title              │ # 标题                          │
│                     │                                 │
│ Abstract:           │ 摘要：                          │
│ ...                 │ ...                             │
│                     │                                 │
│ $$E = mc^2$$        │ $$E = mc^2$$ (渲染公式)         │
│                     │                                 │
│ [表格渲染]           │ [表格翻译]                      │
│                     │                                 │
├────────────────────────┴────────────────────────────────┤
│ 与 Agent 对话                                            │
│ ─────────────────────────────────────────────────────  │
│ 🤖: 这篇论文的核心贡献是什么？                           │
│ 👤: 这篇论文提出了...                                    │
│ ─────────────────────────────────────────────────────  │
│ 💬 输入问题...                              [发送]      │
└─────────────────────────────────────────────────────────┘
```

### 4.3 分析模式

```
┌─────────────────────────────────────────────────────────┐
│ ← 返回 | 论文标题 | 📊 分析报告 | 💬 问答 | 📖 阅读    │
├─────────────────────────────────────────────────────────┤
│ 论文深度分析报告                                        │
│ ─────────────────────────────────────────────────────  │
│ ## 1. 研究动机                                         │
│    - 问题：...                                          │
│    - 背景：...                                          │
│                                                         │
│ ## 2. 核心思想                                         │
│    - 核心贡献：...                                      │
│    - 创新点：...                                        │
│                                                         │
│ ## 3. 算法结构                                         │
│    ┌─────────────────────────────────────────────┐      │
│    │ 算法流程图                                     │      │
│    └─────────────────────────────────────────────┘      │
│                                                         │
│ ## 4. 实验结论                                         │
│    - 数据集：...                                        │
│    - 结果：...                                          │
│                                                         │
│ ## 5. 创新点                                          │
│    1. ...                                              │
│    2. ...                                              │
│    3. ...                                              │
│                                                         │
│ ## 6. 可借鉴点                                         │
│    - ...                                                │
├─────────────────────────────────────────────────────────┤
│ 与 Agent 对话                                            │
│ ─────────────────────────────────────────────────────  │
│ 💬 输入问题...                              [发送]      │
└─────────────────────────────────────────────────────────┘
```

---

## 5. API 配置

| 参数 | 值 |
|------|-----|
| 模型 | MiniMax 2.5 |
| max_tokens | 196608 |
| temperature | 0.3 |

---

## 6. 后续扩展功能

| 功能 | 描述 | 优先级 |
|------|------|--------|
| **论文笔记** | 在论文中添加笔记，同步到 Obsidian | P2 |
| **分享功能** | 生成论文分析分享链接 | P3 |
| **批量分析** | 一次性分析多篇论文 | P2 |
| **引用管理** | 生成 BibTeX 引用 | P2 |
| **笔记模板** | 自定义笔记模板 | P2 |
| **多语言翻译** | 支持英译中之外的其他语言 | P3 |
| **PDF 标注** | PDF 原文直接标注高亮 | P3 |

---

## 7. 响应式布局

### 设备适配

| 设备 | 断点 | 布局 |
|------|------|------|
| 手机 | < 768px | 单栏，Tab 切换（论文库/阅读/分析/问答） |
| 平板 | 768px - 1024px | 双栏，右侧问答可折叠 |
| 电脑 | > 1024px | 三栏（论文库 / 阅读&分析 / 问答） |

### 手机布局示意
```
┌─────────────────────┐
│ 🔍  | 论文库 | ⚙️   │
├─────────────────────┤
│ 论文列表             │
│ ┌─────────────────┐ │
│ │ 论文标题         │ │
│ │ arXiv:xxx       │ │
│ └─────────────────┘ │
│ ...                 │
├─────────────────────┤
│ [论文库] [阅读] [分析] |
└─────────────────────┘
```

### 平板布局
- 左侧：论文列表 (可折叠)
- 中间：阅读/分析内容
- 右侧：Agent 问答 (可展开/折叠)

### 电脑布局
- 左侧：论文库导航 (250px)
- 中间：阅读/分析区域 (flex-1)
- 右侧：Agent 问答 (350px)

---

## 7. 优先级排序

### 第一阶段 (MVP - P0)
1. 多格式论文输入 (PDF/arXiv ID/URL)
2. MinerU 解析
3. 双语对照阅读界面
4. MiniMax 2.5 深度分析 (max_tokens=196608)
5. 右侧 Agent 问答
6. Obsidian 同步

### 第二阶段 (P1)
1. 论文库管理、分类筛选
2. 术语库、翻译优化
3. 问答历史
4. 双向链接

### 第三阶段 (P2-P3)
1. 思维导图
2. 批量分析
3. 语音播报
4. 团队协作

---

*文档版本: v1.0*
*创建日期: 2026-02-21*
